.include "macros.inc"

.section .text, "ax"  # 0x80039220 - 0x804F5900

.global NWC24iPrepareShutdown
NWC24iPrepareShutdown:
/* 8035E130 003276F0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8035E134 003276F4  7C 08 02 A6 */	mflr r0
/* 8035E138 003276F8  3C 80 80 5D */	lis r4, lbl_805D5440@ha
/* 8035E13C 003276FC  3C A0 80 36 */	lis r5, NWC24Shutdown@ha
/* 8035E140 00327700  90 01 00 14 */	stw r0, 0x14(r1)
/* 8035E144 00327704  38 64 54 40 */	addi r3, r4, lbl_805D5440@l
/* 8035E148 00327708  38 00 00 6E */	li r0, 0x6e
/* 8035E14C 0032770C  38 A5 E4 00 */	addi r5, r5, NWC24Shutdown@l
/* 8035E150 00327710  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8035E154 00327714  3B E0 00 00 */	li r31, 0
/* 8035E158 00327718  90 A4 54 40 */	stw r5, lbl_805D5440@l(r4)
/* 8035E15C 0032771C  90 03 00 04 */	stw r0, 4(r3)
/* 8035E160 00327720  4B FF BD B1 */	bl OSRegisterShutdownFunction
/* 8035E164 00327724  80 0D 9A 28 */	lwz r0, lbl_80665BA8@sda21(r13)
/* 8035E168 00327728  2C 00 00 00 */	cmpwi r0, 0
/* 8035E16C 0032772C  40 80 00 50 */	bge lbl_8035E1BC
/* 8035E170 00327730  38 0D 9A 28 */	addi r0, r13, lbl_80665BA8@sda21
/* 8035E174 00327734  3C 60 80 56 */	lis r3, lbl_8055EDF0@ha
/* 8035E178 00327738  2C 00 00 00 */	cmpwi r0, 0
/* 8035E17C 0032773C  38 63 ED F0 */	addi r3, r3, lbl_8055EDF0@l
/* 8035E180 00327740  40 82 00 0C */	bne lbl_8035E18C
/* 8035E184 00327744  3B E0 FF FD */	li r31, -3
/* 8035E188 00327748  48 00 00 34 */	b lbl_8035E1BC
lbl_8035E18C:
/* 8035E18C 0032774C  38 80 00 01 */	li r4, 1
/* 8035E190 00327750  4B FE 52 01 */	bl IOS_Open
/* 8035E194 00327754  2C 03 00 00 */	cmpwi r3, 0
/* 8035E198 00327758  90 6D 9A 28 */	stw r3, lbl_80665BA8@sda21(r13)
/* 8035E19C 0032775C  40 80 00 1C */	bge lbl_8035E1B8
/* 8035E1A0 00327760  2C 03 FF FA */	cmpwi r3, -6
/* 8035E1A4 00327764  40 82 00 0C */	bne lbl_8035E1B0
/* 8035E1A8 00327768  3B E0 FF E3 */	li r31, -29
/* 8035E1AC 0032776C  48 00 00 10 */	b lbl_8035E1BC
lbl_8035E1B0:
/* 8035E1B0 00327770  3B E0 FF D6 */	li r31, -42
/* 8035E1B4 00327774  48 00 00 08 */	b lbl_8035E1BC
lbl_8035E1B8:
/* 8035E1B8 00327778  3B E0 00 00 */	li r31, 0
lbl_8035E1BC:
/* 8035E1BC 0032777C  2C 1F 00 00 */	cmpwi r31, 0
/* 8035E1C0 00327780  38 00 00 05 */	li r0, 5
/* 8035E1C4 00327784  90 0D B9 A8 */	stw r0, lbl_80667B28@sda21(r13)
/* 8035E1C8 00327788  40 82 00 08 */	bne lbl_8035E1D0
/* 8035E1CC 0032778C  3B E0 00 01 */	li r31, 1
lbl_8035E1D0:
/* 8035E1D0 00327790  7F E3 FB 78 */	mr r3, r31
/* 8035E1D4 00327794  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8035E1D8 00327798  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8035E1DC 0032779C  7C 08 03 A6 */	mtlr r0
/* 8035E1E0 003277A0  38 21 00 10 */	addi r1, r1, 0x10
/* 8035E1E4 003277A4  4E 80 00 20 */	blr 
.balign 16, 0
